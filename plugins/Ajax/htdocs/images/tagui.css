span.tag, .tmenu, .tag-display, .tag-display-set, .tag-widget,
.tag-display ul, .tag-display li, .tag-display h1.legend,
.tag-widget .edit-toggle, .tag-widget .related {
	user-select: none;
	-moz-user-select: none;
	cursor: pointer;
}

.tag-entry {
	user-select: text;
	-moz-user-select: text;
	cursor: text;
}


.tag-display span.tag,
.tag-widget .admin-buttons {
	font-family: Optima, sans serif;
}

/* style tags based on what they are */
/* ...for everyone */
.bang > span.tag > .punct { font-weight: bold }
.minus > .tag { text-decoration: line-through; background-color: inherit !important; }
.not-saved > .tag { color: darkgray; background-color: inherit !important; }

/* only for admins */
.adminmode[tag-server] .s1 > .tag,
.adminmode[tag-server] .t2 > .tag {
	font-weight: bold;
	font-variant: small-caps;
}
.adminmode[tag-server] .pound > .tag { font-weight: bold }
.adminmode[tag-server] .descriptive > .tag { color: orange }
.adminmode[tag-server] .ignore > .tag { color: darkgray }

/* tag "suggestions" look different than tags actually applied */
.tag-display[context=related] span.tag {
	font-style: italic;
	font-weight: bold;
}

div.tag-display ul, div.tag-display li {
	display: inline;
	list-style: none inherit none !important;
}

/* your personal tags hidden if that tag already in top|system... */
.tag-display[context=user] li.p,
.tag-display[context=user] li.t,
.tag-display[context=user] li.s,
.tag-display[context=top]  li.s {
	display: none;
}

/* but style the tag that hid yours, so you know */
.tag-display[context=top] li.u,
.tag-display[context=system] li.u,
.tag-display[context=related] li.u {
	text-decoration: underline;
}

.tag-display[context=signoff] .w span.tag {
	background-color: #ff4949 !important;
}

.tag-display[context=signoff] .w:hover span.tag {
	background-color: #f00 !important;
}

.tag-display li:hover span.tag {
	cursor: arrow;
	color: white;
	background-color: #066;
}

div.tag-display,
div.tag-display > h1.legend,
div.tag-widget {
	width: auto !important;
}

/* round edges */
.tag-display ul,
.tag-display span.tag,
.tag-display .tmenu,
.tag-display .tmenu li,
.tag-display h1.legend {
	border: 0 solid transparent;
	-moz-border-radius: 0.4em;
	-webkit-border-radius: 0.4em;
}

/* padding so hover highlighting is bigger than the contents */
div.tag-display > ul,
#contents div.tag-display > ul,
div.tag-display .tmenu li span,
#contents div.tag-display .tmenu li span {
	padding: 0.1em 0.5em !important;
	margin: -0.1em -0.5em !important;
}

div.tag-display .tmenu li span,
#contents div.tag-display .tmenu li span {
	text-align: center;
	min-width: 1.5em;
}

div.tag-display span.tag,
div.tag-display .tmenu,
div.tag-display > h1.legend,
#contents div.tag-display > h1.legend {
	padding: 0.1em 0.3em !important;
	margin: -0.1em -0.3em !important;
}

div.tag-display .tmenu {
	padding: 0;
}

/* give the menus something to position against */
.tag-display > ul > li {
	position: relative;
}

/* tag menus are hidden by default... */
.tag-display .tmenu {
	display: none;
	position: absolute;
	top: -1.2em;
	right: -0.1em;
	font-size: 110%;
	color: #066;
	background-color: white;

	opacity: 0.5;
	-moz-opacity: 0.5;
}

/* ...until you mouse over element to which they are attached */
.tag-display li:hover ul.tmenu {
	display: block;
}

/* the menu item itself */
.tag-display .tmenu > li:hover {
	opacity: 1;
	color: white;
	background-color: black !important;
}

/* separate tags, also menu items */
div.tag-display > ul > li,
div.tag-display .tmenu > li {
	margin-left: 0 !important;
}

div.tag-display + div.tag-display {
	margin-left: 0.5em !important;
}

div.tag-display .tmenu > li + li,
div.tag-display > ul > li + li {
	margin-left: 0.25em !important;
}


.tag-display > h1.legend {
	display: none;
	position: absolute;

	top: -1.6em;
	left: -0.2em;

	color: #066;
	background-color: white;
	opacity: 0.85;

	font-size: 125% !important;
	text-align: left;
	text-transform: capitalize;
}

.tag-display:hover > h1.legend {
	display: block;
}

.tag-display h1.legend {
	-moz-border-radius-bottomleft: 0;
	-moz-border-radius-bottomright: 0;
	-webkit-border-bottom-left-radius: 0em;
	-webkit-border-bottom-right-radius: 0em;
}

.tag-display[context=related] > h1.legend {
	bottom: -2em !important;
	top: inherit;

	-moz-border-radius-bottomleft: 0.4em;
	-moz-border-radius-bottomright: 0.4em;
	-webkit-border-bottom-left-radius: 0.4em;
	-webkit-border-bottom-right-radius: 0.4em;

	-moz-border-radius-topleft: 0;
	-moz-border-radius-topright: 0;
	-webkit-border-top-left-radius: 0;
	-webkit-border-top-right-radius: 0;
}

/* ...that's everything _in_ a tag-display... now let's do the display itself */

div.tag-display {
	display: inline;
	position: relative;
	margin-left: 0 !important;
}

.tag-display:hover > ul {
	background-color: #dfdfdf;
}

.tag-display[context=system] li.d:hover ul.tmenu, /* no menus for data-type tags */
.tag-display li.not-saved:hover ul.tmenu, /* no menus for newly added tags */
.tag-widget.stub,
.tag-display.stub,
.tag-display.no-tags,
.tag-display[context=related].no-tags,
.tag-display[context=user].no-visible-tags {
	display: none !important;
}

.tag-widget .tag-display[context=user],
.tag-widget .tag-display[context=top] {
	display: none;
}

.tag-widget.expanded .tag-display[context=user],
.tag-widget.expanded .tag-display[context=top] {
	display: inline;
}


.tag-display[context=related] {
	display: block;
	text-align: left;
}


.tag-display-set.train {
	display: inline;
	margin-right: 1em;
}

.tag-widget.expanded .tag-display-set.train {
	padding-right: 1em;
}


.tag-widget .tag-entry {
	display: none;
	margin-left: -2em;
	margin-right: 2em;
}

.tag-widget.expanded .tag-entry {
	display: inline;
}

.tag-widget .working + .tag-server-busy {
	display: block;
}

.tag-widget .tag-server-busy {
	display: none;
	position: absolute;
}

.tag-widget.expanded .tag-server-busy {
	top: 0;
	right: 1.2em;
}

.tag-editor {
	display: none;
	position: relative;
}

.tag-widget.expanded .tag-editor {
	display: inline;
}

.tag-widget {
	display: block;
	position: absolute;
	background-color: transparent;
}


/* firehose-specific [to the end of the file] */

#firehose .tag-widget.body-widget {
	right: -0.5em;
	bottom: 6px;
	z-index: 10;
	padding: 0 0.4em 0 0.8em;
	text-align: right;
}

#firehose .tag-widget.body-widget.expanded {
	right: 0;
}

.tag-widget .note-wrapper {
	display: block;
	font-style: italic;
	padding-right: 0.4em;
	margin: 0 1em 0.5em 0;
}

.tag-widget .note-wrapper.no-note {
	display: inline;
	font-style: inherit;
	padding-right: 0;
}

.tag-widget .admin-buttons {
	padding-right: 2.7em;
}

.tag-widget .admin-buttons .note-input {
	font-style: italic;
}

.tag-widget .admin-buttons a {
	text-decoration: none;
}

.tag-widget .admin-buttons .note-wrapper:before {
	content: 'Note: ';
}

.tag-widget .admin-buttons a:before,
.tag-widget .admin-buttons .note-wrapper.no-note a:before {
	content: '[';
}

.tag-widget .admin-buttons a:after,
.tag-widget .admin-buttons .note-wrapper.no-note a:after {
	content: ']';
}

.tag-widget .admin-buttons .note-wrapper a:before,
.tag-widget .admin-buttons .note-wrapper a:after,
.tag-widget .admin-buttons .note-wrapper.no-note:before {
	content: '';
}

.tag-widget div.tags {
	display: inline;
	position: relative;
	right: 1em !important;
	top: 0.8em;
	margin-left: 1em;
}

.briefarticle .tag-widget.body-widget {
	display: none !important;
}


/* nod/nix suggestion bar */

.tag-widget.nod-nix-reasons {
	position: relative;
	bottom: 0;
	color: inherit;
	background-color: inherit;
	text-align: inherit;
	padding-left: 0.8em;

	z-index: 10;
}

div.article div.title div.nod-nix-reasons span.tag {
	color: white;
}

.nod-nix-reasons .tag-display li:hover span.tag {
	color: white;
	background-color: black;
}

.nod-nix-reasons .tag-display:hover ul {
	background-color: inherit;
}
