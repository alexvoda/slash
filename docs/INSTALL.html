    <HTML> 
	<HEAD> 
	    <TITLE>INSTALL - Slash Installation

</TITLE> 
	</HEAD>

	<BODY>

<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#INSTALLATION">INSTALLATION</A>
	<LI><A HREF="#INSTALLATION_OPTIONS">INSTALLATION OPTIONS</A>
	<UL>

		<LI><A HREF="#Multiple_Servers">Multiple Servers</A>
		<LI><A HREF="#Virtual_Hosts">Virtual Hosts</A>
		<LI><A HREF="#SSL">SSL</A>
	</UL>

	<LI><A HREF="#REQUIREMENTS">REQUIREMENTS</A>
	<UL>

		<LI><A HREF="#Software">Software</A>
		<LI><A HREF="#Hardware">Hardware</A>
	</UL>

	<LI><A HREF="#VERSION">VERSION</A>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="NAME">NAME

</A></H1>
INSTALL - Slash Installation


<P>

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS

</A></H1>
This document describes how to install Slash 1.1.x / 2.0.x (code-named
"bender"). For instructions on installation of previous versions of
Slash, see the INSTALL document included with those distributions.


<P>

These instructions have only been tested on Linux. Installation under BSD
and other Unix OSes should work similarly. We've had reports of the 1.0.x
version of Slash running on Windows, but have done no testing and have no
further information.


<P>

PostgreSQL support in Slash 1.1.x is currently alpha-quality, while MySQL
support is beta-quality.


<P>

Slash can always be downloaded from SourceForge, and from the Slashdot FTP
site.


<P>

<PRE>        <A HREF="http://sourceforge.net/projects/slashcode/">http://sourceforge.net/projects/slashcode/</A>
        <A HREF="ftp://ftp.slashdot.org//pub/slash/">ftp://ftp.slashdot.org//pub/slash/</A>
</PRE>

<P>

The CVS repository (http://cvs.slashcode.com/) is tagged with version
numbers, so to get release 1.0.3, use tag "v1_0_3_0". The last number (in
this case a zero) will be incremented during development ("v1_0_3_1",
"v1_0_3_2", etc.) until the next release.


<P>

The software and hardware requirements are listed at the end of the
document, because we know you want to get right into the installation.


<P>

<P>
<HR>
<H1><A NAME="INSTALLATION">INSTALLATION

</A></H1>
<STRONG>Note</STRONG>: For slashd (see <EM>utils/slashd</EM>, which starts slashd), mod_perl (see <EM>httpd/httpd.conf</EM>), and MySQL, we set all processes to run in GMT. Then it is easy to
convert dates to whatever the user's local time is. If you have date offset
problems, check that all of these are properly set to run in GMT.


<P>

<STRONG>Note</STRONG>: All of the installation steps below should be executed as root.


<P>

<OL>
<LI><STRONG><A NAME="item_">

</A></STRONG>
<STRONG>Install MySQL.</STRONG>




<P>

Please refer to MySQL documentation for compilation and/or installation
notes for any questions with this process. Find the script that runs mysql
(probably <EM>safe_mysqld</EM>) and add these lines to the beginning of it:


<P>

<PRE>        TZ=GMT
        export TZ
</PRE>

<P>

Create a database to be used by Slash.


<P>

Create a username/password that can access that database (by default, we
normally set the user to have all permissions, but that might not be
appropriate for your site).


<P>

<LI><STRONG><A NAME="item_">

</A></STRONG>
<STRONG>Install perl.</STRONG>




<P>

perl is likely already installed on your machine; make sure its version is
5.005_03 or better.


<P>

<LI><STRONG><A NAME="item_">

</A></STRONG>
<STRONG>Install Apache and mod_perl.</STRONG>




<P>

<STRONG>You MUST install mod_perl and Apache as directed here</STRONG>. OK, that is not strictly true, but it is <EM>mostly</EM> true. If you already have mod_perl installed, it is probably not configured
properly to work with Slash and you will have to rebuild it. [If you are
using the provided httpd.conf file from the slash distribution, and find
that Apache is giving you errors, chances are mod_perl is not installed
correctly, and you need to build it from scratch.] Of course, if you have
your own Apache modules or build options, you will need to modify the
instructions here appropriately.


<P>

First, untar apache and mod_perl. Then, go to the mod_perl directory, and
have mod_perl build and install apache for you:


<P>

<PRE>        perl Makefile.PL APACHE_SRC=/where_you_have_the_source DO_HTTPD=1 \
                USE_APACI=1 PERL_MARK_WHERE=1 EVERYTHING=1 \
                APACHE_PREFIX=/where_apache_will_be_installed
        make
        make test
        make install
</PRE>

<P>

<LI><STRONG><A NAME="item_">

</A></STRONG>
<STRONG>Install the Perl modules.</STRONG>




<P>

The best way to do this is with the CPAN module.


<P>

With older versions of the CPAN module, the module will try to download and
install the latest version of Perl. Watch what the module is doing; if it
begins to download an entire perl distribution, hit ctrl-C until it stops,
then try again with the CPAN module. (Hopefully, the new CPAN module will
have been installed by this point in the process. If not, try installing
the latest CPAN module by hand, and then repeat the process.)


<P>

Sometimes, you will be installing a newer version of a module that exists
elsewhere on the system. You might want to tell the CPAN module to
automatically remove older files. To do that from the CPAN shell, type:


<P>

<PRE>        cpan&gt; o conf make_install_arg UNINST=1
</PRE>

<P>

You might also wish to install each module by hand, using distributions
found on the CPAN. See <A
HREF="http://perldoc.com/m?perlmodinstall">http://perldoc.com/m?perlmodinstall</A>
for more information on installing perl modules.


<P>

To use the CPAN module, invoke the CPAN shell:


<P>

<PRE>        perl -MCPAN -e shell
</PRE>

<P>

After it has been configured, install Bundle::Slash:


<P>

<PRE>        cpan&gt; install Bundle::Slash
</PRE>

<P>

When Bundle::Slash is finished, install the DBIx::Password module:


<P>

<PRE>        cpan&gt; install DBIx::Password
</PRE>

<P>

When asked, give the info for accessing the Slash database created in step
1.


<P>

<STRONG>Note</STRONG>: If running BSD, also install the BSD::Resource module.


<P>

<LI><STRONG><A NAME="item_">

</A></STRONG>
<STRONG>Install Slash.</STRONG>




<P>

Unpack the distribution and go to the new directory that creates, and type:


<P>

<PRE>        make
        make install
</PRE>

<P>

There are a few options to <CODE>make</CODE> and <CODE>make install</CODE> you may want to change.


<P>

<PRE>        option  default                 purpose
        ====================================================
        PREFIX  /usr/local/slash        Location for
                                        installed files
        INIT    /etc/rc.d               Location for init
                                        scripts
        USER    nobody                  User to own files
        GROUP   nobody                  Group to own files
</PRE>

<P>

(USER and GROUP will also be changed later on a per-site basis, in step 6.
while running <EM>install-slashsite</EM>.)


<P>

So, for example, you might type:


<P>

<PRE>        make INIT=/etc PREFIX=/home/slash
        make install INIT=/etc PREFIX=/home/slash
</PRE>

<P>

When done, a configuration file for Apache will be created at
<EM>$PREFIX/slash.conf</EM>. You can put its contents into your httpd.conf, or you can just <CODE>Include</CODE> it in your httpd.conf.


<P>

<LI><STRONG><A NAME="item_">

</A></STRONG>
<STRONG>Install your Slash site.</STRONG>




<P>

Go to your installation directory (by default, <EM>/usr/local/slash</EM>) and execute (where <CODE>VIRTUAL_USER</CODE> is the name of the virtual user given in the DBIx::Password distribution):


<P>

<PRE>        bin/install-slashsite VIRTUAL_USER
</PRE>

<P>

The program will prompt for answers to several configuration questions.
Answer the questions. When done, another configuration file will be created
at <EM>$PREFIX/$SITENAME/$SITENAME.conf</EM>. You can put its contents unto your httpd.conf, or you can just <CODE>Include</CODE> it in your httpd.conf.


<P>

</OL>
<P>
<HR>
<H1><A NAME="INSTALLATION_OPTIONS">INSTALLATION OPTIONS

</A></H1>
<P>
<HR>
<H2><A NAME="Multiple_Servers">Multiple Servers

</A></H2>
You can, of course, have a separate database server from your Slash server.
Further, you can have multiple web servers for one Slash site. Slashdot,
for instance, has one primary server with all of the code (Apache, perl,
etc.), and it runs slashd and NFS. Each web server then mounts the code
read-only over NFS. Some notes:


<P>

<UL>
<LI><STRONG></STRONG>
Make sure the MySQL server allows the user to log in from each web server,
and the NFS server.


<P>

<LI><STRONG></STRONG>
Make sure, if you use the same httpd tree on all machines, that the
httpd.conf is listening to the proper IP addresses. This can be done by
putting all of the IP addresses in the conf file, or by having a separate
Listen file on each machine. Similarly, make sure that each web server's
logfiles unique to each machine, not written to the NFS volumes.


<P>

</UL>
<P>
<HR>
<H2><A NAME="Virtual_Hosts">Virtual Hosts

</A></H2>
Slash has support for virtual hosts, so you can have multiple Slash sites
on one machine. Simply execute step 6 in the install process for each Slash
site (after adding a new virtual user to DBIx::Password for each).


<P>

<P>
<HR>
<H2><A NAME="SSL">SSL

</A></H2>
In Slash, there are two variables for the root URL of the site.
<STRONG>absolutedir</STRONG> is the full URL, including protocol, while <STRONG>rootdir</STRONG>
is the URL without protocol:


<P>

<PRE>        absolutedir     <A HREF="http://slashcode.com">http://slashcode.com</A>
        rootdir         <A HREF="//slashcode.com">//slashcode.com</A>
</PRE>

<P>

<STRONG>absolutedir</STRONG> is used only for creating external links to the site (such as in RSS
files).  <STRONG>rootdir</STRONG> is used for internal links; that way, you can use the same HTML pages for
SSL and non-SSL. You don't have to do anything special to the code or
preferences to allow it to work with SSL by itself, SSL and non-SSL
together, or non-SSL by itself.


<P>

<P>
<HR>
<H1><A NAME="REQUIREMENTS">REQUIREMENTS

</A></H1>
<P>
<HR>
<H2><A NAME="Software">Software

</A></H2>
Below, the main software components needed are listed. The recommended
version is noted, along with the earliest version that has been tested (or
is expected) to work.


<P>

<DL>
<DT><STRONG><A NAME="item_perl">perl

</A></STRONG><DD>
Version 5.6.0 (5.005_03).


<P>

<PRE>        <A HREF="http://www.cpan.org/">http://www.cpan.org/</A>
</PRE>

<P>

<DT><STRONG><A NAME="item_MySQL">MySQL

</A></STRONG><DD>
Version 3.23 (3.22).


<P>

<PRE>        <A HREF="http://www.mysql.com/">http://www.mysql.com/</A>
</PRE>

<P>

<DT><STRONG><A NAME="item_Apache">Apache

</A></STRONG><DD>
Version 1.3.14 (1.3.6).


<P>

<PRE>        <A HREF="http://httpd.apache.org/">http://httpd.apache.org/</A>
</PRE>

<P>

<DT><STRONG><A NAME="item_mod_perl">mod_perl

</A></STRONG><DD>
Versions 1.24_01 (1.21).


<P>

<PRE>        <A HREF="http://perl.apache.org/">http://perl.apache.org/</A>
</PRE>

<P>

<DT><STRONG><A NAME="item_Sendmail">Sendmail or other transport daemon

</A></STRONG><DD>
Refer to your OS distribution.


<P>

<DT><STRONG><A NAME="item_Perl">Perl module distributions

</A></STRONG><DD>
See <A HREF="http://search.cpan.org/">http://search.cpan.org/</A> and <A
HREF="http://www.cpan.org/">http://www.cpan.org/</A> to get each module
individually; however, we recommend you download them using the CPAN
module.


<P>

The latest version of each module is recommended.


<P>

For Compress::Zlib, the zlib development library is required. For
XML::Parser, the expat library is required. If they are not present on the
system already, download and install them before installing the modules.


<P>

<PRE>        <A HREF="ftp://ftp.freesoftware.com/pub/infozip/zlib/">ftp://ftp.freesoftware.com/pub/infozip/zlib/</A>
        <A HREF="http://sourceforge.net/projects/expat/">http://sourceforge.net/projects/expat/</A>
</PRE>

<P>

The following modules are all included in the Bundle::Slash distribution.


<P>

<DL>
<DT><STRONG><A NAME="item_DBI">DBI

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Data">Data-ShowTable

</A></STRONG><DD>
<DT><STRONG><A NAME="item_TimeDate">TimeDate

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Msql">Msql-Mysql-modules

</A></STRONG><DD>
<DT><STRONG><A NAME="item_ApacheDBI">ApacheDBI

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Apache">Apache-DBILogConfig

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Apache">Apache-DBILogger

</A></STRONG><DD>
<DT><STRONG><A NAME="item_libnet">libnet

</A></STRONG><DD>
<DT><STRONG><A NAME="item_HTML">HTML-Parser

</A></STRONG><DD>
<DT><STRONG><A NAME="item_XML">XML-Parser

</A></STRONG><DD>
<DT><STRONG><A NAME="item_XML">XML-RSS

</A></STRONG><DD>
<DT><STRONG><A NAME="item_MIME">MIME-Base64

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Digest">Digest-MD5

</A></STRONG><DD>
<DT><STRONG><A NAME="item_URI">URI

</A></STRONG><DD>
<DT><STRONG><A NAME="item_libwww">libwww-perl

</A></STRONG><DD>
<DT><STRONG><A NAME="item_DateManip">DateManip

</A></STRONG><DD>
<DT><STRONG><A NAME="item_File">File-Spec

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Mail">Mail-Sendmail

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Compress">Compress-Zlib

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Image">Image-Size

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Storable">Storable

</A></STRONG><DD>
<DT><STRONG><A NAME="item_Template">Template

</A></STRONG><DD>
</DL>
Also required:


<P>

<DL>
<DT><STRONG><A NAME="item_DBIx">DBIx-Password

</A></STRONG><DD>
</DL>
</DL>
<P>
<HR>
<H2><A NAME="Hardware">Hardware

</A></H2>
There are no specific hardware requirements. Apache (with mod_perl) and
MySQL both take up a lot of RAM; running a complete system with 128MB might
be possible, if you do some tuning of the configuration, but a practical
minimum 256MB is recommended. Storage space depends on how busy you expect
the site to be; 250MB is possible, but a minimum 1GB is recommended.
Necessary processor speed is also dependent on how busy the site is;
Pentium 133 or equivalent might work, but less than a Pentium II/200 is not
recommended.


<P>

For the curious, Slashdot (as of January 2001) runs on eight machines: six
webservers (each is Pentium III/600, 1GB RAM, 9GB hard drive), one NFS
server (dual PIII/600, 2GB RAM, 2 x 9GB hard drive), and one database
server (quad Xeon/550, 2GB RAM, 6 x 9GB hard drive). However, this is
certainly overkill for most sites (and possibly even overkill for
Slashdot).


<P>

<P>
<HR>
<H1><A NAME="VERSION">VERSION

</A></H1>
Document last modified Wednesday, January 10, 2001.

<P>

</DL>
    </BODY>

    </HTML>
